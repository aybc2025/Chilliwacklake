<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>אגם צ’יליווק – משחקים ומידע לילדים</title>
  <meta name="theme-color" content="#22c55e" />
  <link rel="manifest" href="manifest.json">
  <link rel="icon" sizes="192x192" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-512.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="app-header">
    <h1>🧭 אגם צ’יליווק – Sx̱ótsaqel</h1>
    <button id="installBtn" class="primary small" hidden>התקנה לטלפון</button>
  </header>

  <main>
    <nav class="tabs" role="tablist" aria-label="תפריט תוכן">
      <button role="tab" aria-selected="true" class="tab active" data-tab="home">דף הבית</button>
      <button role="tab" class="tab" data-tab="map">מפה אינטראקטיבית</button>
      <button role="tab" class="tab" data-tab="pdfmap">מפת PDF רשמית</button>
      <button role="tab" class="tab" data-tab="agreement">הסכם</button>
      <button role="tab" class="tab" data-tab="pack">משחק אריזה</button>
      <button role="tab" class="tab" data-tab="memory">משחק זיכרון</button>
      <button role="tab" class="tab" data-tab="quiz">חידון בטיחות</button>
      <button role="tab" class="tab" data-tab="weather">מזג-אוויר & רוח</button>
      <button role="tab" class="tab" data-tab="plan">מתכנן יום</button>
      <button role="tab" class="tab" data-tab="stickers">מדבקות</button>
    </nav>

    <section id="home" class="panel show">
      <div class="card hero">
        <h2>ברוכים הבאים! 🌲🏕️</h2>
        <p>בחרנו ב<strong>ראדיום לופ</strong> לקמפינג – שקט, עצים ופרטיות. באתר תלמדו על הבטיחות והכיף בפארק.</p>
        <ul class="bullets">
          <li>מפה אינטראקטיבית (ראדיום לופ)</li>
          <li>מפת PDF רשמית של הפארק</li>
          <li><strong>משחק אריזה</strong> מותאם לנייד + <strong>משחק זיכרון</strong></li>
          <li><strong>חידון בטיחות</strong> (10 שאלות)</li>
        </ul>
        <p class="note">אין קליטה סלולרית בפארק – מתכוננים מראש 🙂</p>
      </div>

      <div class="facts">
        <h3>עובדות מהירות</h3>
        <ul id="factsList" class="checklist"></ul>
      </div>
    </section>

    <!-- מפה אינטראקטיבית (Radium בלבד) -->
    <section id="map" class="panel">
      <h2>🗺️ מפה אינטראקטיבית – Radium Loop</h2>
      <p>הקישו על הסמלים כדי ללמוד: חוף, שיגור סירות, שירותים/ברזיות ו־sani-station.</p>
      <div class="map-wrap">
        <svg id="campSVG" viewBox="0 0 800 500" class="map-svg" aria-label="מפת פארק צ׳יליווק">
          <!-- Lake -->
          <rect x="10" y="50" width="280" height="400" rx="10" ry="10" fill="#60a5fa" opacity="0.9"></rect>
          <text x="30" y="80" font-size="18" fill="#0f172a">אגם צ׳יליווק</text>
          <!-- Beach -->
          <rect x="290" y="300" width="60" height="80" fill="#fde68a" rx="6"></rect>
          <g class="hotspot" data-info="חוף רחצה – מים קרים, בלי מציל. נכנסים קרוב לחוף ובזהירות ברוח.">
            <circle cx="320" cy="340" r="16" fill="#f59e0b"></circle>
            <text x="312" y="344" font-size="16">🏖️</text>
          </g>
          <!-- Boat launch -->
          <g class="hotspot" data-info="שיגור סירות – עד ~20 פיט. 'איטיות מתה' ליד השיגור.">
            <rect x="290" y="385" width="60" height="12" fill="#6b7280"></rect>
            <text x="300" y="380" font-size="16">🛶</text>
          </g>
          <!-- Day-use -->
          <rect x="360" y="280" width="120" height="120" fill="#bbf7d0" rx="10"></rect>
          <text x="370" y="300" font-size="14">אזור יום-יום</text>
          <!-- Playground -->
          <g class="hotspot" data-info="מגרש משחקים – מקום מצוין לפני שקיעה.">
            <circle cx="420" cy="340" r="14" fill="#86efac"></circle>
            <text x="412" y="344" font-size="16">⚽</text>
          </g>
          <!-- Road frame -->
          <path d="M 480 60 L 760 60 L 760 440 L 500 440" stroke="#9ca3af" stroke-width="10" fill="none" stroke-linecap="round"></path>
          <!-- Radium loop -->
          <g id="radiumLoop">
            <circle cx="620" cy="200" r="95" fill="#e0f2fe" stroke="#3b82f6" stroke-width="4"></circle>
            <text x="565" y="205" font-size="16" fill="#0f172a">Radium Loop</text>
            <!-- Our campsite -->
            <g class="hotspot" data-info="האתר שלנו – ראדיום לופ. שקט, עצים ופרטיות 🙂">
              <circle cx="680" cy="160" r="12" fill="#fde68a" stroke="#f59e0b" stroke-width="3"></circle>
              <text x="672" y="164" font-size="14">⭐</text>
            </g>
            <!-- Toilets -->
            <g class="hotspot" data-info="שירותי בור">
              <rect x="560" y="150" width="16" height="16" fill="#94a3b8"></rect>
              <text x="556" y="146" font-size="14">🚻</text>
            </g>
            <!-- Water tap -->
            <g class="hotspot" data-info="ברזיית מי שתייה">
              <rect x="600" y="250" width="16" height="16" fill="#93c5fd"></rect>
              <text x="598" y="246" font-size="14">🚰</text>
            </g>
          </g>
          <!-- Sani-station -->
          <g class="hotspot" data-info="Sani-station – ריקון/מילוי (בתשלום).">
            <rect x="520" y="80" width="24" height="16" fill="#94a3b8"></rect>
            <text x="548" y="92" font-size="14">🧰</text>
          </g>
        </svg>
        <div id="mapTip" class="map-tip" role="dialog" aria-live="polite" hidden></div>
      </div>
    </section>

    <!-- מפת PDF רשמית -->
    <section id="pdfmap" class="panel">
      <h2>🧭 מפת הקמפגראונד הרשמית (PDF)</h2>
      <p>אפשר להגדיל/לפתוח בחלון חדש אם הטעינה איטית בדפדפן נייד.</p>
      <div class="embed-wrap">
        <object id="pdfObject"
                data="https://nrs.objectstore.gov.bc.ca/kuwyyf/chilliwack_lake_campground_map_e9d158346e.pdf"
                type="application/pdf"
                class="embed-frame">
          <p>לא ניתן להציג PDF בדפדפן זה. <a class="external" href="https://nrs.objectstore.gov.bc.ca/kuwyyf/chilliwack_lake_campground_map_e9d158346e.pdf" target="_blank" rel="noopener">פתח/י במלוא המסך</a></p>
        </object>
      </div>
      <p><a class="external" target="_blank" rel="noopener"
        href="https://nrs.objectstore.gov.bc.ca/kuwyyf/chilliwack_lake_campground_map_e9d158346e.pdf">פתח/י במלוא המסך</a></p>
    </section>

    <!-- הסכם (NotebookLM) עם נפילה במקרה של חסימת הטמעה -->
    <section id="agreement" class="panel">
      <h2>📄 ההסכם</h2>
      <p>ייתכן שיידרש חיבור לחשבון Google והעמוד לא ייטמע בתוך האתר (מדיניות אבטחה). יש קישור ישיר בהמשך.</p>
      <div class="embed-wrap">
        <iframe id="agreementFrame"
                class="embed-frame"
                loading="lazy"
                src="about:blank"
                data-src="https://notebooklm.google.com/notebook/fe560a9c-c128-427c-a0cb-244b8d90f22b?artifactId=3811d581-4a19-4497-83a7-9c9998caf109"
                referrerpolicy="no-referrer"
                allowfullscreen></iframe>
      </div>
      <div id="agreementFallback" class="embed-fallback" hidden>
        לא ניתן להטמיע את ההסכם בדפדפן זה. לחצו לפתיחה בחלון חדש:
        <a class="external" target="_blank" rel="noopener"
          href="https://notebooklm.google.com/notebook/fe560a9c-c128-427c-a0cb-244b8d90f22b?artifactId=3811d581-4a19-4497-83a7-9c9998caf109">פתיחה בהסכם</a>
      </div>
      <button id="loadAgreement" class="primary small">טען/י את ההסכם</button>
    </section>

    <!-- משחק אריזה -->
    <section id="pack" class="panel">
      <h2>🎒 משחק אריזה</h2>
      <p>לחצו <strong>(בנייד)</strong> או גררו <strong>(במחשב)</strong> פריטים אל ה<span class="droplabel">תיק</span>. דברים טובים = נקודות, דברים לא מתאימים = מינוס!</p>
      <div class="pack-wrap">
        <ul id="packItems" class="items" aria-label="פריטים לאריזה"></ul>
        <div id="dropZone" class="drop" aria-label="איזור התיק" tabindex="0">התיק שלי</div>
      </div>
      <div class="scorebar">נקודות: <span id="score">0</span></div>
    </section>

    <!-- משחק זיכרון -->
    <section id="memory" class="panel">
      <h2>🧠 משחק זיכרון – טבע ובטיחות</h2>
      <p>הפכו קלפים ומצאו זוגות תואמים! אפשר לשחק יחד 🙂</p>
      <div id="memoryGrid" class="memory-grid" aria-live="polite"></div>
      <button id="memoryReset" class="primary small">משחק חדש</button>
      <div id="memoryMsg" class="memory-msg" hidden></div>
    </section>

    <!-- חידון, מזג־אוויר, מתכנן, מדבקות – ללא שינויי מבנה -->
    <section id="quiz" class="panel">
      <h2>❓ חידון בטיחות</h2>
      <div id="quizBox" class="quiz"></div>
      <button id="nextQ" class="primary">שאלה הבאה</button>
    </section>

    <section id="weather" class="panel">
      <h2>🌤️ איך הרוח משתנה?</h2>
      <p>גררו את השעות וראו איך ה״גלים״ משתנים. <strong>אחר הצהריים</strong> לרוב יש יותר רוח.</p>
      <label>שעה: <input id="timeSlider" type="range" min="6" max="20" value="10"> <span id="timeVal">10:00</span></label>
      <div class="lake">
        <div class="boat" aria-hidden="true">🛶</div>
        <div class="waves"></div>
      </div>
    </section>

    <section id="plan" class="panel">
      <h2>📅 מתכנן יום קצר</h2>
      <p>בחרו פעילות לבוקר, צהריים וערב. בסוף תקבלו <strong>תוכנית יום</strong> ידידותית לילדים.</p>
      <div class="plan-grid">
        <div>
          <h3>בוקר</h3>
          <select id="morning">
            <option>חוף ומשחקי חול</option>
            <option>מסלול לינדמן (קצר)</option>
            <option>סיבוב אופניים בלולאה</option>
          </select>
        </div>
        <div>
          <h3>צהריים</h3>
          <select id="noon">
            <option>פיקניק מוצל</option>
            <option>שייט קרוב לחוף (למי שמנוסה)</option>
            <option>מגרש משחקים</option>
          </select>
        </div>
        <div>
          <h3>ערב</h3>
          <select id="eve">
            <option>תצפית כוכבים</option>
            <option>טיול קצר על שביל החוף</option>
            <option>סיפור ליד “מדורת” גז</option>
          </select>
        </div>
      </div>
      <button id="makePlan" class="primary">בנו תוכנית</button>
      <pre id="planOut" class="plan-out" aria-live="polite"></pre>
    </section>

    <section id="stickers" class="panel">
      <h2>🏅 מדבקות הישגים</h2>
      <p>הרוויחו מדבקות בלמידה ובמשחקים. ההתקדמות נשמרת במכשיר.</p>
      <div style="margin:6px 0;"><button id="resetBtn" class="tab">איפוס התקדמות</button></div>
      <ul id="stickerList" class="stickers"></ul>
    </section>
  </main>

  <footer class="app-footer">
    <small>מוכן לשימוש גם בלי אינטרנט (PWA). נוצר לשימוש חינוכי.</small>
  </footer>

  <script src="app.js" type="module"></script>
</body>
</html>